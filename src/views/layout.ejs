<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %> - AgroDrones</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <% if (user) { %>
  <header class="header">
    <div class="header-container">
      <a href="/dashboard" class="logo">
        <img src="/images/logo.png" alt="AgroDrones" style="height: 40px; margin-right: 10px; vertical-align: middle;">
        <span style="vertical-align: middle;">Agro<span style="color: var(--secondary);">Drones</span></span>
      </a>
      <nav class="nav">
        <a href="/dashboard">Dashboard</a>
        <a href="/applications">Aplicações</a>
        <a href="/clients">Clientes</a>
        <a href="/drones">Drones</a>
        <a href="/operators">Operadores</a>
        <a href="/reports">Relatórios</a>
        <% if (user.role === 'admin') { %>
        <a href="/settings">Configurações</a>
        <% } %>
      </nav>
      <div class="user-menu">
        <span class="user-name"><%= user.name %></span>
        <a href="/auth/logout" class="btn-logout">Sair</a>
      </div>
    </div>
  </header>
  <% } %>
  
  <main class="container">
    <%- body %>
  </main>
  
  <script>
    // Collapsible sections
    document.querySelectorAll('.collapsible-header').forEach(header => {
      header.addEventListener('click', () => {
        header.parentElement.classList.toggle('active');
      });
    });
    
    // Auto-dismiss alerts
    setTimeout(() => {
      document.querySelectorAll('.alert').forEach(alert => {
        alert.style.transition = 'opacity 0.5s';
        alert.style.opacity = '0';
        setTimeout(() => alert.remove(), 500);
      });
    }, 5000);
  </script>
</body>
</html>

